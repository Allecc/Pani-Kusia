//
   Created by Jan Śledziewski on 18.05.2017.

extends layout
block content
    script.
        $(function () {
            $.ajax({
                url: "/load",
                success: function (JSON) {
                    var dane = "";
                    var input = $('.data-input');
                    input.css('height', (JSON.length / 3 * 150));
                    for (var id = JSON.length - 1; id >= 0; id--) {
                        dane +=
                            "<button class='row col-md-12' data-toggle='collapse' data-target='#product" + id +"'> Pokaż " + JSON[id].title + "</button>" +
                            "<div class='product milky collapse' id ='product" + id +"'>" +
                            "<div>" +
                            "<h3 id='tytul'>" +
                            JSON[id].title +
                            "</h3>" +
                            JSON[id].description +
                            "<br />" +
                            "<strong id='autor'>" +
                            JSON[id].price +
                            "</strong>" +
                            "<h3> <a href= '/product/" + id + "'" + "> Here </a> </h3> " +
                            "</div>" +
                            "</div>";
                    }
                    input.append(dane);
                }
            });
        });

    div.row.col-md-offset-2.col-md-8
        unless user
            div.login-form.row.col-md-4.col-md-offset-4.spacing
                div
                    form(action = '/login', method='post')
                        div
                            label
                                b Login:
                            input(type = 'text', placeholder='Podaj login...', name='username')
                        div
                            label
                                b Hasło:
                            input(type = 'password', placeholder='Wpisz hasło...', name='password')
                        div
                            button(type = 'submit') Loguj
        if user
            div.row.col-md-12
                div.row.col-md-offset-2.col-md-8.spacing.well
                    h1 Dodaj produkty
                    form(action='/add', method='POST')
                        b Nazwij produkt:
                        input(type='text', name='title')
                        br
                        b Dodaj opis:
                        input(type='text', name='description')
                        br
                        b Dodaj cenę:
                        input(type='text', name='price')
                        br
                        b Obrazek produktu:
                        input(type='text', name='image')
                        input(type='submit')
            div.row.col-md-12.data-input